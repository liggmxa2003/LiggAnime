<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户页面</title>
    <link rel="stylesheet" href="../static/css/user.css" th:href="@{/css/user.css}">
    <link rel="stylesheet" href="../../static/css/me.css" th:href="@{/css/me.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/semantic-ui/2.2.4/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <style>

    </style>
</head>
<body>
<!--头部导航-->
<nav th:replace="admin/_fragments :: menu(0)">

</nav>
<br>
<div class="ui container grid">
    <!-- 左侧导航栏 -->
    <div class="four wide column">
        <div class="sidebar">
            <div class="ui card user-card">
                <div class="image">
                    <img src="#" th:src="@{${session.user.avatar}}" alt="用户头像"
                         style="border-radius: 50%; border: none;">
                </div>
                <div class="content">
                    <a class="header" th:text="${session.user.nickname}">用户名</a>
                    <div class="meta">
                        <span>普通用户</span>
                    </div>
                    <div class="extra content">
                        <span>积分: 10</span>
                    </div>
                </div>
            </div>
            <div class="ui vertical menu">
                <a class="item"><i class="user icon"></i> 会员信息</a>
                <a class="item"><i class="clock outline icon"></i> 我的记录</a>
                <a class="item"><i class="heart icon"></i> 收藏记录</a>
                <a class="item"><i class="gift icon"></i> 积分兑换</a>
                <a class="item"><i class="credit card icon"></i> 充值记录</a>
                <a class="item"><i class="tags icon"></i> 积分记录</a>
                <a class="item"><i class="trash icon"></i> 退出账户</a>
            </div>
        </div>
    </div>

    <!-- 右侧内容区域 -->
    <div class="twelve wide column">
        <div class="content-area">
            <h2 class="ui dividing header">账户信息</h2>
            <form action="#" th:object="${user}" th:action="@{/admin/user/update/{id}(id=*{id})}" method="post" class="ui form"  onsubmit="return validateForm()">
                <div class="ui form user-info">
                    <div class="field">
                        <label>编号</label>
                        <input name="id" type="text" placeholder="id" value="" th:field="*{id}" readonly>
                    </div>
                    <div class="field">
                        <label>账号</label>
                        <input type="text" placeholder="账号" value="" th:field="*{username}" readonly>
                    </div>
                    <div class="field">
                        <label>密码</label>
                        <input id="password" name="password" type="password" placeholder="修改密码" value="" th:value="*{password}">
                        <div class="ui mini negative message" th:if="${#fields.hasAnyErrors()}">
                            <span th:each="err : ${#fields.errors('password')}" th:text="${err}"></span>
                        </div>
                    </div>
                    <div class="field">
                        <label>邮箱</label>
                        <input name="email" type="text" placeholder="请输入邮箱" value="" th:field="*{email}">
                    </div>
                    <div class="field">
                        <label>头像</label>
                        <input name="avatar" type="text" placeholder="头像链接" value="" th:field="*{avatar}">
                    </div>
                    <div class="field">
                        <label>用户名</label>
                        <input name="nickname" type="text" placeholder="用户名" value="" th:field="*{nickname}">
                    </div>
                    <div class="field">
                        <label>用户组</label>
                        <input type="text" placeholder="用户组" value="普通用户" readonly>
                    </div>
                    <div class="field">
                        <label>会员期限</label>
                        <input type="text" placeholder="会员期限" value="无" readonly>
                    </div>
                    <div class="field">
                        <label>注册时间</label>
                        <input type="text" placeholder="注册时间" value="" readonly>
                    </div>
                    <div class="field">
                        <label>登陆IP</label>
                        <input type="text" placeholder="登陆IP" value="221.7.248.234" readonly>
                    </div>
                    <div class="field">
                        <label>登陆时间</label>
                        <input type="text" placeholder="登陆时间" value="2024-11-01 08:52:50" readonly>
                    </div>

                </div>
                <div style="margin-top: 20px;">
                    <button class="ui primary button">保存</button>
                    <button class="ui button">取消</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!--底部footer-->
<footer th:replace="admin/_fragments :: footer">

</footer>


<th:block th:replace="admin/_fragments :: script">

</th:block>
<script>
    function validateForm() {
        const passwordInput = document.getElementById('password');
        const errorMessage = document.getElementById('error-message');

        if (passwordInput.value.trim() === '') {
            errorMessage.style.display = 'block';
            return false;
        } else {
            errorMessage.style.display = 'none';
            // 表单验证通过，可以提交表单
            return true;
        }
    }
</script>
</body>
</html>